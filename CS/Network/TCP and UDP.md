# TCP, UDP
- [TCP, UDP의 탄생 배경](#tcp-udp의-탄생-배경)
- [TCP](#tcp)
- [UDP](#udp)
- [흐름 제어](#흐름-제어)
- [혼잡 제어](#혼잡-제어)
- [참고](#참고)
</br>

# TCP, UDP의 탄생 배경

- IP는 host to host를 지원하여 장치까지는 전달이 되지만 어떤 프로그램이 통신하는지는 모른다.
    - 그래서 기존의 IP 주소에 프로그램의 포트 번호를 합친 소켓 주소를 전송 계층에서 사용한다.
- IP에서 오류가 발생하더라도 대처가 불가능해서 탄생한 것이 전송 계층이고 그것에 해당하는 프로토콜이 TCP, UDP이다.
</br>

# TCP

- 연결형 서비스를 지원하는 **전송계층 프로토콜**
- 1:1 통신 방식, 송신자와 수신자를 연결하는 통신 서비스를 제공
- 연속성보다는 신뢰성있는 전송이 중요할 때 사용하는 프로토콜
- transport 계층의 프로토콜은 종단 시스템에서만 구현된다. 중간에 있는 라우터들은 네트워크계층까지만 있음
- host간 **신뢰성**있는 데이터 전달과 **흐름제어 및 혼잡제어**를 제공한다.
- 사용되는 곳은 HTTP, ftp 등이 있다.
</br>

### TCP 특징

- 인터넷 환경에서(http, http/2) 기본으로 사용한다.
- 지연시간 제어 불가능 : queueing delay가 어떤 상황인지는 모르는 일이라서
- **흐름제어, 혼잡제어**는 가능 : 전송 데이터 양(윈도우 크기)을 조절하면 됨
    - 즉, 일정 시간 이상의 지연이 발생하면 한 번에 전송하는 데이터의 양을 줄인다.
- 연결 설정 (3 hand shaking)과 해제 (4 hand shaking)에 다음과 같은 방법 사용한다.
</br>

# UDP

- 데이터를 데이터그램 단위로 처리하는 프로토콜
    - 데이터그램 : 독립적인 관계를 지니는 패킷
- **비연결형** 서비스를 지원하는 전송계층 프로토콜
- 전이중(full duplex), point to point 방식
- DNS, broadcasting 등에서 사용된다.
</br>

### UDP 특징

- 전송 순서를 보장하지 않는다.
- TCP의 3 way handshake같은 연결 설정 과정이 **없다.**
- 신뢰성이 낮지만 **속도가 빠르다.** 따라서 신뢰성보다는 연속성이 중요한 서비스에 사용
- 헤더의 Checksum 필드를 통해 최소한의 오류만 검출한다. (없을 수 있음)
- MTU 사이즈에 맞게 데이터를 분리해서 보낼 때 데이터를 의미있는 단위로 분리해서 전송한다.
- 1:1, 1:N, N:M으로 연결될 수 있다.
- **흐름제어가 없어서** 패킷이 제대로 전송되었는지 확인할 수 없다.
</br>

### DNS가 UDP를 사용하는 이유

- DNS는 신뢰성보다 속도가 중요한 서비스라서 UDP가 유리하다.
- 전송하는 데이터 패킷 사이즈도 매우 작아서 신뢰성 보장이 필요 없다. (여러 패킷으로 나눠진 것이 아니라 순서 보 장도 필요 없고 못받으면 다시 전달하면 된다.)
- 연결 상태를 유지할 필요가 없다.
</br>

# 흐름 제어

- 호스트와 호스트 간의 데이터 처리를 효율적으로 하기 위한 기법
- 즉, 송신측과 수신측의 데이터 처리 속도 차이를 해결하는 방법이다.
- 수신측의 데이터 처리 속도가 송신측이 보내는 데이터 속도가 더 빠르면, 수신측에서 받을 수 있는 한계량을 넘어서 데이터의 손실이 생긴다.
- 방법으로는 stop and wait, 슬라이딩 윈도우 등의 방법이 있다.
</br>

# 혼잡 제어

- 송신측의 데이터 전달속도와 네트워크 처리속도 차이를 해결하기 위한 기법이다.
- 즉, 한 번에 보낸 패킷들이 제 시간안에 모두 도착하지 못하면 전송하는 네트워크가 혼잡한 상황이라고 판단하여 보내는 양(윈도우 크기)을 줄인다.
</br>

# 참고
[[TCP/UDP] TCP와 UDP의 특징과 차이](https://mangkyu.tistory.com/15)

[흐름제어(Flow control)과 혼잡제어(Congestion control)](https://jsonsang2.tistory.com/17)

[[Network]DNS가 UDP를 이용하는 이유](https://kingofbackend.tistory.com/198)