

# OSI 7 Layer란?

- 국제 표준화 기구에서 개방형 시스템 상호 연결을 위한 기초 참조 모델로서 만들어진 계층형 모델이다.
- 현재의 인터넷은 각 계층의 역할들이 합쳐지만서 TCP/IP 4 layer라는 계층 모델을 기반으로 한다.
</br>

# 왜 계층 구조?

- 인터넷뿐만 아니라 한 시스템과 다른 한 시스템이 통신하기에는 다양한 규칙, 장비가 필요하다.
- 이렇게 복잡한 시스템을 계층별로 단순화하여 서비스의 구현을과 변경이 쉬워진다.
- 특정한 곳에 이상이 생겨도 그 단계만 수정하면 되어서 유지보수도 용이하다.
</br>


# 프로토콜이란?

- 둘 이상의 통신 개체간에 교환되는 메시지 포맷과 순서, 송수신과 다른 이벤트에 따른 행동들을 정의한다.
    - 즉, 메시지 주고받는 양식, 통신 규약이다.
</br>


# 7계층 (application layer)

- 응용 프로그램들이 통신으로 활용하는 계층이다.
- 소켓 프로그래밍에서 정의한 서버와 클라이언트간에 주고 받는 규칙들도 응용 계층의 프로토콜이라고 볼 수 있다.
    - 마찬가지로 소켓 프로그래밍으로 HTTP 규격에 맞는 형태로 메시지를 보내면 HTTP 통신도 가능
- HTTP, SMTP, FTP 등이 있다.
</br>


# 6계층 (presentation layer)

- 애플리케이션들이 교환되는 **데이터의 의미를 해석**하도록 하는 서비스를 제공하는 계층
- 송수신자가 공통으로 이해할 수 있도록 데이터 표현 방식을 변경한다.
- MIME 인코딩이나 암호화 등이 이 계층에서 이루어진다.
- 인터넷 계층구조에는 포함되지 않으며 필요에 따라 응용 계층에서 지원해야됨
    - 소켓 프로그래밍에서 통신 프로그램을 개발 할 때 인코딩 방법을 결정하고 알려줘야한다.
    - 받는 쪽과 인코딩 형태가 맞지 않으면 받은 데이터를 잘못 해석한다.
</br>


# 5계층 (session layer)

- 표현계층과 마찬가지로 인터넷 계층 구조에 포함되지 않음
- 설정, 조율(ex 시스템의 응답 대기 기간), 세션 마지막에 응용프로그램 간의 종료 등의 기능이 포함된다.
- 어플리케이션 간의 논리적 연결인 세션의 생성, 관리, 종료를 담당하는 계층이다.
- TCP/IP 세션을 만들고 없애는 책임을 지님
</br>


# 4계층 (Transport Layer)

- 상위 계층의 메시지를 전송하는 서비스를 제공하는 계층이다.
    - 인터넷에서 TCP, UDP가 대표적
- 전송 계층의 **목적**은 메시지의 **오류를 제어**하며 End to End로 **종단간에** 해당하는 지점까지 메시지를 **주고 받는 것**
- 메시지가 크면 이를 나눠서 네트워크 계층으로 전달하고, 받은 패킷을 재조립해서 상위 계층으로 전달한다.
    - 이걸 segmentation이라 함, 따라서 전송 계층 단위는 segment임
- **신뢰성, 흐름 제어, 다중화** 등의 서비스를 제공
</br>


# 3계층 (network layer)

- 패킷을 한 호스트에서 다른 호스트로 라우팅하는 책임을 지는 계층
    - 전송 측에서 목적지까지 데이터 패킷이 거쳐가는 최적의 경로를 선택하여 배정하는 기능
    - 인터넷 계층에서 IP 프로토콜이 대표적
- 인터넷 네트워크 계층의 패킷을 **데이터그램**이라고 한다
- 전송 계층에서 전달 받은 목적지 주소를 이용해 패킷을 만들고 패킷을 전송해서 최종 목적지의 호스트의 전송 계층으로 Segment를 전달한다.
- IP 프로토콜의 핵심은 **어디로 동작**하도록 정의한 **Forwarding**과 **어떤 경로로 전송**할지 결정하는 **Routing**이다.
    - 라우팅 : 라우팅 알고리즘을 이용하여 포워딩 테이블을 만드는 작업 **(길찾는 작업)**
    - 포워딩 : 포워딩 테이블에 적힌 목적지 주소로 대응된 출력 포트로 패킷을 이동시키는 작업 **(데이터 넘기는 작업)**
- 이 계층의 장비로 대표적인 것은 라우터
</br>


# 2계층 (data link layer)

- 링크 계층의 패킷을 **프레임**이라고 한다.
- 전체 프레임을 한 네트워크 요소에서 이웃 네트워크 요소로 이동하는 계층
    - 인터넷에서는 ethernet 프로토콜이 대표적
    - 이더넷은 MAC 주소를 이용해 node to node, point to point로 프레임을 전송
- 노드 간 데이터 전송을 제공하며 물리 계층의 오류 수정도 처리한다.
- 이 MAC 주소는 장치가 만들어질 때 물리적으로 할당 받아서 **변할 수 없는 고유 값**이다.
- 같은 네트워크에 있는 여러 대의 컴퓨터들이 데이터를 주고 받기 위해서 필요한 모듈
</br>


# 1계층 물리 계층 (phusical layer)

- 프레임 내부의 각 비트를 한 노드에서 다음 노드로 실제로 이동하는 계층이다.
- 이 계층의 프로토콜은 데이터 링크 계층과 실제 전송 매체에 의존한다.
- 인터넷의 이더넷도 여러 물리 계층 프로토콜을 갖고 있다.
- 대표적인 장비로는 허브가 있다.



---
### 참고 

[https://github.com/ksundong/backend-interview-question](https://github.com/ksundong/backend-interview-question)


[TechnicalNote/OSI7layer.md at master · jobhope/TechnicalNote](https://github.com/jobhope/TechnicalNote/blob/master/network/OSI7layer.md#ref1)

[네트워크의 기본 'OSI 7계층'··· 한번에 이해하고 외우는 방법](https://www.ciokorea.com/news/36536#csidxa7b8fb7c6c7e34a85f2253bf8c1b283)